<!DOCTYPE html>
<html lang="en">
<head>
        <title>parselcli - css and xpath selectors in your terminal!</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.7/css/fork-awesome.min.css">
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="游동 crawl.blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="游동 crawl.blog Full Atom Feed" />
        <link href="游동 crawl.blog/atom.xml" type="application/atom+xml" rel="alternate" title="游동 crawl.blog Atom Feed" />
        <link href="游동 crawl.blog/rss.xml" type="application/rss+xml" rel="alternate" title="游동 crawl.blog RSS Feed" />
        <link href="游동 crawl.blog/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="游동 crawl.blog Categories Atom Feed" />

        <meta name="author" content="granitosaurus" />
        <meta name="description" content="I&#39;d like to introduce parselcli an command line application for evaluating css and xpath selectors in your terminal." />
<meta property="og:site_name" content="游동 crawl.blog"/>
<meta property="og:title" content="parselcli - css and xpath selectors in your terminal!"/>
<meta property="og:description" content="I&#39;d like to introduce parselcli an command line application for evaluating css and xpath selectors in your terminal."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/parselcli-css-and-xpath-selectors-in-your-terminal.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-03-28 00:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/granitosaurus.html">
<meta property="article:section" content="tools"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="parsel"/>
<meta property="article:tag" content="parsing"/>
<meta property="og:image" content="">
</head>
<body>

    <div class="navigation pure-menu pure-menu-horizontal pure-menu-scrollable">
        <a href="/" class="pure-menu-heading  pure-menu-link">游동 crawl.blog</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"></li>
              <li class="pure-menu-item"><a href="/pages/about.html" class="pure-menu-link">about</a></li>
              <li class="pure-menu-item"><a href="/category/guides.html" class="pure-menu-link">guides</a></li>
              <li class="pure-menu-item"><a href="/category/research.html" class="pure-menu-link">research</a></li>
              <li class="pure-menu-item"><a href="/category/tools.html" class="pure-menu-link">tools</a></li>
              <li class="pure-menu-item pure-menu-selected">
                <a href="atom.xml" class="pure-menu-link">
                  <i class="fa fa-rss" aria-hidden="true"></i>
                </a>
              </li>
        </ul>
    </div>
<div class="page-container">
    <div class="entry-content">
        <div class="post-meta pure-g">

<div class="pure-u-3-4 meta-data">
    <a href="/category/tools.html" class="category">tools</a>
    &mdash; <span title="2019-03-28T00:00:00+01:00">Thu 28 March 2019</span></br>
    <a href="/tag/python" class="tag">python</a>
    <a href="/tag/parsel" class="tag">parsel</a>
    <a href="/tag/parsing" class="tag">parsing</a>
    </br>
</div>        </div>
    </div>

    <div class="article-header-container">
        <div class="background-image-container">

            <div class="background-image-small">
                <div class="title-container">
                    <h1>parselcli - css and xpath selectors in your terminal!</h1>
                </div>
            </div>
        </div>

    <div class="entry-content">
        <!--insert table of contents between text and first header-->
        <p>Building html parser can be quite time consuming and often complicated. <a href="https://github.com/scrapy/parsel">parsel</a> is a python library for parsing html with css or xpath selectors, while <a href="https://github.com/Granitosaurus/parsel-cli">parselcli</a> is an interactive shell wrapper around it.</p>
<p><em>Disclaimer: I wrote parselcli</em></p>
<p>In short <code>parselcli</code> allows you to do this:</p>
<script id="asciicast-234118" src="https://asciinema.org/a/234118.js" async></script>

<p>At the moment version 0.31 <code>parselcli</code> has these features:</p>
<ul>
<li>css and xpath selectors</li>
<li>Auto complete for classes, ids and tags with history (for ptpython shell)</li>
<li>Evaluating against cached, live urls or local files (see --cached and --file flags)</li>
<li>
<p>Inline executions:</p>
<div class="highlight"><pre><span></span>$ parsel &quot;http://httpbin.org/html&quot; -c h1
[&#39;<span class="nt">&lt;h1&gt;</span>Herman Melville - Moby-Dick<span class="nt">&lt;/h1&gt;</span>&#39;]
</pre></div>


</li>
<li>
<p>Supports output processors:</p>
<div class="highlight"><pre><span></span>$ parsel <span class="s2">&quot;http://httpbin.org/html&quot;</span> -c h1::text -p join,len
<span class="m">27</span>
<span class="c1"># the h1 text is 27 characters long!</span>
</pre></div>


</li>
<li>
<p>Supports commands for fast workflow and debuging:</p>
<div class="highlight"><pre><span></span>$ parsel <span class="s2">&quot;http://httpbin.org/html&quot;</span>
&gt; -help
available commands <span class="o">(</span>use -command<span class="o">)</span>:
  help: show <span class="nb">help</span>
  debug: show debug info
  embed: start interactive python shell
  open: open current url in browser tab
  view: open current html in browser tab
  fetch: download from new url
  css: switch to css selectors
  xpath: switch to xpath selectors
</pre></div>


</li>
<li>
<p>Fully configurable via <code>~/.config/parsel.toml</code> file (depending on your <code>$XDG_CONFIG</code>)</p>
</li>
<li>Preload embed shell for full python<div class="highlight"><pre><span></span>$ parsel <span class="s2">&quot;http://httpbin.org/html&quot;</span> --embed
&gt;&gt;&gt; dir<span class="o">()</span>
<span class="o">[</span><span class="s1">&#39;request&#39;</span>, <span class="s1">&#39;response&#39;</span>, <span class="s1">&#39;sel&#39;</span><span class="o">]</span>
&gt;&gt;&gt; response.cookies
&lt;RequestsCookieJar<span class="o">[]</span>&gt;
</pre></div>


</li>
</ul>

        <h2>My Workflow</h2>
<p>I build <code>parselcli</code> to have faster and more convenient workflow for building html parsers.</p>
<p><video width="480" height="240" autoplay loop muted title=""><source src="/video/spongebob_work.mp4" type="video/mp4"></video><figcaption></figcaption></p>
<p>First thing I do is find a product/item that has the higher coverage. For example if I'm crawling a clothing shop I look for a product that has all of the fields like variants, colours, sizes and multiple prices. Shoes in often meet this criteria. <br>
This will be my <em>genesis</em> html that I will use to build my parser.</p>
<p>I pass this url to my <code>parsel</code> and cache it in case I need to run it again in the future. </p>
<div class="highlight"><pre><span></span>$ parsel <span class="s2">&quot;http://httpbin.org/html&quot;</span> --cache
using cached version
&gt;
</pre></div>


<p>Afterwards if the website functions without javascript I use <code>-view</code> command to open up source in my browser or <code>-open</code> command to open up live url in my browser.  </p>
<p>In my browsers (chromium or qutebrowser) I open up inspector and click around html code and identify my css selectors if they are possible, xpath if something more complicated is required.<br>
I pop my ideas to parsel shell and see how it looks.</p>
<div class="highlight"><pre><span></span><span class="err">&gt; h1::text</span>
<span class="err">[&#39;Herman Melville - Moby-Dick&#39;]</span>
</pre></div>


<p>If I'm satisfied I save the selectors in my crawler code and move on.<br>
Quite simple really!</p>
<h2>Contribution is Welcome!</h2>
<p>Parselcli is still in rather early development but I've been using it <em>in production</em> for a while now. Nevertheless any contributions are welcome!</p>
<p><a href="/img/parselcli_releases.png"><img src="/img/parselcli_releases.png" title=""></img></a><figcaption></figcaption></p>
<p>https://github.com/Granitosaurus/parsel-cli</p>
    </div>

    <footer>
        <div class="tags">
            <a href="/tag/python.html">python</a>
            <a href="/tag/parsel.html">parsel</a>
            <a href="/tag/parsing.html">parsing</a>
        </div>
    </footer>
</div>



    <footer class="index-footer">

        <a href="/" title="游동 crawl.blog">游동 crawl.blog</a>
        <a href="/archives.html">Archives</a></li>
        <a href="/categories.html">Categories</a></li>
        <a href="/tags.html">Tags</a></li>
        <a href="/category/guides.html">guides</a>
        <a href="/category/research.html">research</a>
        <a href="/category/tools.html">tools</a>
        <a href="atom.xml">
          <i class="fa fa-rss-square" aria-hidden="true"></i>
        </a>

    </footer>

</body>
</html>